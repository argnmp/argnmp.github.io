<!DOCTYPE html>
<html lang="en">
    <head>
        <title>blog.argnmp</title>
        
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="data:,">
        <link href="/static/main.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
        <script src="/static/entry_bundle.js"></script>
        <script src="/static/module_bundle.js" type="module"></script>
    </head>
    <body class="dark:bg-gray-800">
        <div class="p-5 sm:px-10 md:px-16 lg:container mx-auto lg:px-20 py-5 xl:px-48 box-border h-screen w-screen">
            <div class="flex text-customlight-700 dark:text-customdark-400 mb-4 border-b border-customlight-700 dark:border-customdark-400">
                <div class="grow flex flex-col justify-center items-start">
                    <a class="inline-block" href="/">
                        <p class="text-xl font-bold px-2 bg-customlight-700 text-white dark:bg-customdark-400 dark:text-gray-800 rounded">
                        blog.argnmp
                        </p>
                    </a>
                </div>
                <button id="searchToggle" class="cursor-pointer justify-center items-center p-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 stroke-gray-600 dark:stroke-gray-400"
                        viewBox="0 0 24 24" stroke-width="1.5" fill="none" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                        <path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" />
                        <path d="M21 21l-6 -6" />
                    </svg>
                </button>
                <button id="toggle" class="cursor-pointer justify-center items-center p-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="dark:hidden w-4 h-4" viewBox="0 0 16 16">
                        <path class="fill-gray-600" d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" class="hidden dark:block w-4 h-4" viewBox="0 0 16 16">
                        <path class="fill-gray-400" d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
                        <path class="fill-gray-400" d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
                    </svg>
                </button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-12 gap-2">
                <div class="md:col-span-3">
                    <div class="flex md:flex-col text-gray-900 dark:text-gray-200">
                        <div class="w-full md:object-center basis-1/4">
                          <img class="w-full max-w-sm mx-auto rounded-md ring-customlight-600 dark:ring-customdark-500" src="/static/profile image.png" />
                        </div>
                        <div class="grow pl-4 md:p-0 md:text-left my-auto">
                          <p class="text-xl md:mt-3 mb-2 font-bold">argnmp</p>
                          
                          <p class="text-xs">컴퓨터공학 관련 주제를 주로 다룹니다.</p>
                          
                          <p class="text-xs">argnmp@gmail.com</p>
                          
                          
                          
                          <p class="text-xs"><a class="text-xs" href="https://github.com/argnmp">github</a></p>
                          
                        </div>
                    </div>
                    <div id="toc" class="sticky top-5 mt-5 border-l-2">
                        <p class="pl-4 pb-1 text-sm text-gray-900 dark:text-gray-200 cursor-pointer hover:text-custom-light-700 dark:hover:text-custom-light-400 hover:font-bold hover:underline" hidden>to load styles for dynamically created elements</ul>
                    </div>
                </div>
                <div id="main" class="grid-flow-row md:col-span-9 rounded-lg">
                    <div id="searchModule" class="md:pl-3" hidden>
                        <div class="pb-2">
                            <form class="flex">
                                <input type="text" name="search" id="search_input" class="inline w-full rounded-md border-0 py-1 px-2 text-gray-900 ring-1 ring-inset ring-gray-300 dark:ring-gray-700 placeholder:text-gray-400 focus:ring-1 focus:ring-inset focus:ring-customlight-600 dark:focus:ring-customdark-300 text-sm sm:leading-6 dark:bg-gray-800 dark:text-gray-200" placeholder="search for child nodes..." onkeyup="window.search()">
                            </form>
                        </div>
                        <div class="" id="search_result">
                            <a class="" href="">
                                <div class="mb-1 px-2 py-1 border border-gray-200 dark:border-gray-600 dark:text-gray-200 hidden">
                                </div> 
                            </a>
                        </div> 
                    </div>
                    
                    
                    <article>
                        <section class="w-full mb-12">
                            <div class="mb-2 md:pl-5">
                                <p class="text-4xl md:text-[40px] break-keep font-semibold text-gray-700 dark:text-gray-200 py-1">boj 1949 우수 마을</p>
                                
                            </div>
                            <div class="flex flex-row mb-4 md:pl-5 text-gray-500 dark:text-gray-400">
                                <div class="mr-2"><p class="text-xs italic">Taehyeon Kim</p></div>
                                <div class="mr-2"><p class="text-xs italic">2023-12-17</p></div>
                                <div class="bg-customlight-100 bg-customlight-200 bg-customlight-300 bg-customlight-400 bg-customlight-500 bg-customlight-600 bg-customlight-700 bg-customlight-800 bg-customlight-900 dark:bg-customdark-100 dark:bg-customdark-200 dark:bg-customdark-300 dark:bg-customdark-400 dark:bg-customdark-500 dark:bg-customdark-600 dark:bg-customdark-700 dark:bg-customdark-800 dark:bg-customdark-900" hidden></div>
                                <div class="mr-2 flex flex-row">
                                    
                                    
                                    
                                    
                                    

                                    <div class="px-1 mr-1 bg-customlight-500 dark:bg-customdark-500 align-middle text-xs text-white rounded-md">
                                        boj
                                    </div>
                                    
                                    
                                    
                                    

                                    <div class="px-1 mr-1 bg-customlight-600 dark:bg-customdark-600 align-middle text-xs text-white rounded-md">
                                        ps
                                    </div>
                                    
                                    
                                </div>
                            </div>
                        </section>
                        <div class="clear-none markdown-body mb-10 md:pl-5 leading-6 font-post">
                            <h3 id="문제">문제</h3>
<p><a href="https://www.acmicpc.net/problem/1949">https://www.acmicpc.net/problem/1949</a></p>
<h3 id="코드">코드</h3>
<pre><code class="language-c++">#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;climits&gt;
#include &lt;vector&gt;
#include &lt;queue&gt;
#include &lt;map&gt;
#include &lt;unordered_map&gt;
#include &lt;set&gt;
#include &lt;unordered_set&gt;
#include &lt;bitset&gt;
#include &lt;cstring&gt;
using namespace std;
using ll = long long;
int n;
int weight[10001] = {0,};
vector&lt;vector&lt;int&gt;&gt; graph;

/*
 * 0 for not selecting root node of subtree
 * 1 for selecting root node of subtree
 */
int dp[10001][2] = {0,};

void calc(int node, int parent){
    bool is_child_exist = false;
    bool is_selected_sub_exist = false;
    bool max_sub1_case = INT_MIN;
    bool used_sub0_value;
    for(int next: graph[node]){
        if(next == parent)
            continue;
        calc(next, node);

        // not selecting the root node of current subtree dp[node][0]
        dp[node][0] += max(dp[next][0], dp[next][1]);
        if(dp[next][0] &lt;= dp[next][1]){
            // if selected case and not selected case are same, assume that selected case is used for calculation
            is_selected_sub_exist = true; 
        }
        is_child_exist = true;
        if(max_sub1_case &lt; dp[next][1]){
            max_sub1_case = dp[next][1];
            used_sub0_value = dp[next][0];
        }

        // selecting the root node of current subtree dp[node][1]
        dp[node][1] += dp[next][0];
    } 
    dp[node][1] += weight[node];
    if(is_child_exist &amp;&amp; !is_selected_sub_exist){
        // all subtree root node is not selected case
        // force to select one of subtrees' root nodes
        dp[node][0] -= used_sub0_value;
        dp[node][0] += max_sub1_case;
    }
}

void solve(){
    graph = vector(10001, vector&lt;int&gt;());
    cin &gt;&gt; n;
    for(int i = 1; i&lt;=n; i++){
        cin &gt;&gt; weight[i]; 
    }
    int u, v;
    for(int i = 0; i&lt;n-1; i++){
        cin &gt;&gt; u &gt;&gt; v; 
        graph[u].push_back(v);
        graph[v].push_back(u);
    }
    calc(1, 1);    
    cout &lt;&lt; max(dp[1][0], dp[1][1]) &lt;&lt; '\n';
    /* for(int i = 1; i&lt;=n; i++){
        cout &lt;&lt; dp[i][0] &lt;&lt; ' ' &lt;&lt; dp[i][1] &lt;&lt; '\n';
    } */
}
int main(){
    ios::sync_with_stdio(0);
    cin.tie(0);
    solve(); 
    return 0;
}

</code></pre>
<h3 id="풀이">풀이</h3>
<p><a href="/post/boj%202213%20%ED%8A%B8%EB%A6%AC%EC%9D%98%20%EB%8F%85%EB%A6%BD%EC%A7%91%ED%95%A9.html">boj 2213 트리의 독립집합</a> 이 문제와 같은 풀이 방식을 사용하면된다. 이 문제에서 작성한 코드와 원리는 같지만, dp 배열을 채워나간다고 생각하며 조금 다르게 코드를 작성하였다.</p>
<p>이 문제에서는 세번째 조건을 생각해보아야 한다. 우수 마을로 선정되지 못한 마을은 적어도 하나의 우수 마을과는 인접해 있어야 한다고 한다. 이를 처리해주기 위해서 다음과 같이 로직을 추가해주었다.</p>
<ul>
<li>인접한 <strong>모든</strong> 서브트리에서 해당 서브 트리의 루트 노드를 고르지 않는 경우의 수가 그렇지 않은 경우의 수보다 주민 수의 총합이 더 큰 경우에, 이 서브트리 들 중 루트 노드를 고르는 경우의 수가 가장 큰 서브트리에 대해서만 반대로 적용을 해준다.</li>
</ul>
<p>하지만 이 로직은 필요가 없는 로직이다. 왜냐하면 위 로직이 필요한 이유는, 현재 서브트리의 루트 노드를 고르지 않았을 때 인접한 모든 서브 트리의 루트 노드를 고르지 않을 경우의 수를 대비하였기 때문이다. 하지만 이러한 경우의 수는 존재하지 않는데, 왜냐하면 인접한 모든 서브 트리의 루트 노드를 고르지 않는다면 현재 서브트리의 루트 노드를 고를 수 있기 때문이다.</p>
<h3 id="느낀점">느낀점</h3>
<p>문제의 의미를 잘 생각해보면서, 필요 없는 로직에 대해 고민하고 있는 것은 아닌지 확인하자!</p>
<ul>
<li><a href="/post/boj%202213%20%ED%8A%B8%EB%A6%AC%EC%9D%98%20%EB%8F%85%EB%A6%BD%EC%A7%91%ED%95%A9.html">boj 2213 트리의 독립집합</a></li>
<li><a href="/post/boj%202533%20%EC%82%AC%ED%9A%8C%EB%A7%9D%20%EC%84%9C%EB%B9%84%EC%8A%A4(SNS).html">boj 2533 사회망 서비스(SNS)</a>
이 문제들과 같은 풀이를 사용한다. 다만 여기에서는 dp배열에 집중하여 코드를 작성했으므로, 이렇게 풀도록 노력해야한다.</li>
</ul>

                        </div>
                    </article>

                </div>
            </div> 
            <footer class="py-4 text-sm text-gray-700 dark:text-gray-200 text-center">
                © 2023. Taehyeon Kim All rights reserved. 
            </footer>
        </div>
    </body>
</html>
