<!DOCTYPE html>
<html lang="en">
    <head>
        <title>blog.argnmp</title>
        
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="data:,">
        <link href="/static/main.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
        <script src="/static/entry_bundle.js"></script>
        <script src="/static/module_bundle.js" type="module"></script>
    </head>
    <body class="dark:bg-gray-800">
        <div class="p-5 sm:px-10 md:px-16 lg:container mx-auto lg:px-20 py-5 xl:px-48 box-border h-screen w-screen">
            <div class="flex text-customlight-700 dark:text-customdark-400 pb-2 mb-4 border-b-4 border-customlight-700 dark:border-customdark-400">
                <div class="grow">
                    <a class="inline-block" href="/">
                        <p
                            class="text-3xl font-bold hover:bg-customlight-700 hover:text-white dark:hover:bg-customdark-400 dark:hover:text-gray-800">
                        blog.argnmp</p>
                    </a>
                </div>
                <button id="searchToggle" class="cursor-pointer justify-center items-center p-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 stroke-gray-600 dark:stroke-gray-400"
                        viewBox="0 0 24 24" stroke-width="1.5" fill="none" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                        <path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" />
                        <path d="M21 21l-6 -6" />
                    </svg>
                </button>
                <button id="toggle" class="cursor-pointer justify-center items-center p-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="dark:hidden w-4 h-4" viewBox="0 0 16 16">
                        <path class="fill-gray-600" d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" class="hidden dark:block w-4 h-4" viewBox="0 0 16 16">
                        <path class="fill-gray-400" d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
                        <path class="fill-gray-400" d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
                    </svg>
                </button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-12 gap-2">
                <div class="md:col-span-3">
                    <div class="flex md:flex-col text-gray-900 dark:text-gray-200">
                        <div class="w-full md:object-center basis-1/4">
                          <img class="w-full max-w-sm mx-auto rounded-md ring-customlight-600 dark:ring-customdark-500" src="/static/profile image.png" />
                        </div>
                        <div class="grow pl-4 md:p-0 md:text-left my-auto">
                          <p class="text-2xl md:mt-3 mb-2 font-bold">argnmp</p>
                          
                          <p class="text-xs">컴퓨터공학 관련 주제를 주로 다룹니다.</p>
                          
                          <p class="text-xs">argnmp@gmail.com</p>
                          
                          
                          
                          <p class="text-xs"><a class="text-xs" href="https://github.com/argnmp">github</a></p>
                          
                        </div>
                    </div>
                    <div id="toc" class="sticky top-5 mt-5 border-l-2">
                        <p class="pl-4 pb-1 text-sm text-gray-900 dark:text-gray-200 cursor-pointer hover:text-custom-light-700 dark:hover:text-custom-light-400 hover:font-bold hover:underline" hidden>to load styles for dynamically created elements</ul>
                    </div>
                </div>
                <div id="main" class="grid-flow-row md:col-span-9 rounded-lg">
                    <div id="searchModule" class="md:pl-3" hidden>
                        <div class="pb-2">
                            <form class="flex">
                                <input type="text" name="search" id="search_input" class="inline w-full rounded-md border-0 py-1 px-2 mr-2 text-gray-900 ring-1 ring-inset ring-gray-300 dark:ring-gray-700 placeholder:text-gray-400 focus:ring-1 focus:ring-inset focus:ring-customlight-600 dark:focus:ring-customdark-300 text-sm sm:leading-6 dark:bg-gray-800 dark:text-gray-200" placeholder="search for child nodes..." onkeyup="window.search()">
                                <input type="submit" name="submit" id="submit" class="inline bg-customlight-700 hover:bg-white hover:text-customlight-700 border border-customlight-700 dark:border-customdark-400 text-gray-200 dark:bg-customdark-400 dark:text-gray-900 hover:dark:bg-gray-800 hover:dark:text-gray-200 rounded-md px-2 text-sm cursor-pointer" onclick="window.search()" value="search">
                            </form>
                        </div>
                        <div class="" id="search_result">
                            <a class="" href="">
                                <div class="mb-1 px-2 py-1 border border-gray-200 dark:border-gray-600 dark:text-gray-200 hidden">
                                </div> 
                            </a>
                        </div> 
                    </div>
                    
                    
                    <article>
                        <section class="w-full mb-12">
                            <div class="mb-2 md:pl-5">
                                <p class="text-4xl md:text-4xl break-keep font-semibold text-gray-700 dark:text-gray-200 py-1">boj 2169 로봇 조종하기</p>
                                
                            </div>
                            <div class="flex flex-row mb-4 md:pl-5 text-gray-500 dark:text-gray-400">
                                <div class="mr-2"><p class="text-xs italic">Taehyeon Kim</p></div>
                                <div class="mr-2"><p class="text-xs italic">2024-03-21</p></div>
                                <div class="bg-customlight-100 bg-customlight-200 bg-customlight-300 bg-customlight-400 bg-customlight-500 bg-customlight-600 bg-customlight-700 bg-customlight-800 bg-customlight-900 dark:bg-customdark-100 dark:bg-customdark-200 dark:bg-customdark-300 dark:bg-customdark-400 dark:bg-customdark-500 dark:bg-customdark-600 dark:bg-customdark-700 dark:bg-customdark-800 dark:bg-customdark-900" hidden></div>
                                <div class="mr-2 flex flex-row">
                                    
                                    
                                    
                                    
                                    

                                    <div class="px-1 mr-1 bg-customlight-500 dark:bg-customdark-500 align-middle text-xs text-white rounded-md">
                                        boj
                                    </div>
                                    
                                    
                                    
                                    

                                    <div class="px-1 mr-1 bg-customlight-600 dark:bg-customdark-600 align-middle text-xs text-white rounded-md">
                                        ps
                                    </div>
                                    
                                    
                                </div>
                            </div>
                        </section>
                        <div class="clear-none markdown-body mb-10 md:pl-5 leading-6 font-post">
                            <h3 id="문제">문제</h3>
<p><a href="https://www.acmicpc.net/problem/2169">https://www.acmicpc.net/problem/2169</a></p>
<h3 id="풀이">풀이</h3>
<h3 id="첫번째 풀이: dfs + dp">첫번째 풀이: dfs + dp</h3>
<pre><code class="language-c++">#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;climits&gt;
#include &lt;vector&gt;
#include &lt;queue&gt;
#include &lt;map&gt;
#include &lt;unordered_map&gt;
#include &lt;set&gt;
#include &lt;unordered_set&gt;
#include &lt;bitset&gt;
#include &lt;cstring&gt;
#include &lt;cmath&gt;
#define dbgn(x) printf(&quot;[DBG] %s: %lld\n&quot;, #x, (ll)x);
#define dbgarr(r, c, x) printf(&quot;[DBG] %s\n&quot;, #x);\
for(int i=0; i&lt;r; i++){\
    for(int j=0; j&lt;c; j++){\
        printf(&quot;%2lld &quot;, (ll)x[i][j]);\
    }\
    printf(&quot;\n&quot;);\
}

using namespace std;
using ll = long long;

int n, m;
int board[1000][1000];
int dx[3] = {1, 0, 0};
int dy[3] = {0, 1, -1};
// 0: from top, 1: from left, 2: from right
int dp[1000][1000][3] = {0,};
int visited[1000][1000] = {0,};
int dfs(int x, int y, int dir){
    if(dp[x][y][dir]!=INT_MIN)
        return dp[x][y][dir];
    if(x==n-1 &amp;&amp; y==m-1){
        return board[x][y];
    }

    visited[x][y] = 1;
    
    int maxv = INT_MIN;
    for(int i = 0; i&lt;3; i++){
        int nx = x+dx[i]; 
        int ny = y+dy[i]; 
        if(visited[nx][ny]==0 &amp;&amp; 0&lt;=nx &amp;&amp; nx&lt;n &amp;&amp; 0&lt;=ny &amp;&amp; ny&lt;m){
            int res = dfs(nx, ny, i);
            if(res==INT_MIN)
                continue;
            maxv = max(maxv, board[x][y] + res); 
        }
    }
    visited[x][y] = 0;
    
    dp[x][y][dir] = maxv;
    return dp[x][y][dir];
}
void solve(){
    fill(&amp;dp[0][0][0], &amp;dp[999][999][3], INT_MIN);
    cin &gt;&gt; n &gt;&gt; m;
    for(int i = 0; i&lt;n; i++){
        for(int j = 0; j&lt;m; j++){
            cin &gt;&gt; board[i][j];
        }
    }
    cout &lt;&lt; dfs(0, 0, 0);
}
int main(){
    ios::sync_with_stdio(0);
    cin.tie(0);
    solve(); 
    return 0;
}
</code></pre>
<p>일단 로봇은 세 방향으로만 움직일 수 있다. 이것의 의미는, dfs로 탐색할 때 visited 배열을 이용해서 방금 전의 위치로 되돌아 가지만 않으면, 방금 전보다 이전의 위치들에 대해서는 절대로 방문하지 않게 된다는 것을 의미한다. 따라서 문제의 제약조건을 dfs로 구현이 가능하게 된다.</p>
<p>하지만 이렇게 하면, 매우 많은 경우의 수가 나온다. 2방향 또는 3방향으로 움직일 수 있기 때문이다. 따라서 dp배열을 통해서 이미 구한 최댓값에 대해서는 중복 계산을 방지해주어야 한다.</p>
<p>여기서 <code>dp[x][y][dir]</code>배열을 이용해서 <code>[x, y]</code>위치에 <code>dir</code>방향으로 들어와서 방문했을 때의 최댓값을 저장한다. 즉 <code>[1,1]</code>에서 <code>[n, m]</code>으로 향하면서, 먼저 세 방향으로 이동해보고 돌아오면서 세 방향의 결과를 비교하여 최댓값을 구하는 방식이다.</p>
<h4 id="두번째 풀이: dp">두번째 풀이: dp</h4>
<pre><code class="language-c++">#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;climits&gt;
#include &lt;vector&gt;
#include &lt;queue&gt;
#include &lt;map&gt;
#include &lt;unordered_map&gt;
#include &lt;set&gt;
#include &lt;unordered_set&gt;
#include &lt;bitset&gt;
#include &lt;cstring&gt;
#include &lt;cmath&gt;
#define dbgn(x) printf(&quot;[DBG] %s: %lld\n&quot;, #x, (ll)x);
#define dbgarr(r, c, x) printf(&quot;[DBG] %s\n&quot;, #x);for(int i=0; i&lt;r; i++){for(int j=0; j&lt;c; j++){printf(&quot;%2lld &quot;, (ll)x[i][j]);}printf(&quot;\n&quot;);}
using namespace std;
using ll = long long;

int n, m;
int board[1000][1000] = {0,};
int dpl[1000][1000] = {0,};
int dpr[1000][1000] = {0,};
void solve(){
    cin &gt;&gt; n &gt;&gt; m;
    for(int i = 0; i&lt;n; i++)
        for(int j = 0; j&lt;m; j++)
            cin &gt;&gt; board[i][j];
    dpl[0][0] = board[0][0];
    dpr[0][0] = board[0][0];
    for(int i = 1; i&lt;m; i++){
        dpl[0][i] = dpl[0][i-1] + board[0][i];
        dpr[0][i] = dpr[0][i-1] + board[0][i];
    }
    for(int i = 1; i&lt;n; i++){
        dpl[i][0] = dpl[i-1][0] + board[i][0];
        for(int j = 1; j&lt;m; j++){
            dpl[i][j] = max(dpl[i][j-1], dpl[i-1][j]) + board[i][j];
        }
        dpr[i][m-1] = dpr[i-1][m-1] + board[i][m-1];
        for(int j = m-2; j&gt;=0; j--){
            dpr[i][j] = max(dpr[i][j+1], dpr[i-1][j]) + board[i][j];
        }
        for(int j = 0; j&lt;m; j++){
            int maxv = max(dpl[i][j], dpr[i][j]);
            dpl[i][j] = dpr[i][j] = maxv;
        }
    }
    // dbgarr(n, m, dpl);
    // dbgarr(n, m, dpr);
    cout &lt;&lt; dpl[n-1][m-1];
}
int main(){
    ios::sync_with_stdio(0);
    cin.tie(0);
    solve(); 
    return 0;
}
</code></pre>
<p>다음과 같은 사항을 고려하여 dp로 풀 수 있다.</p>
<ul>
<li>로봇은 한번 내려오면 다시 올라가지 못한다.</li>
<li>로봇은 한번 왼쪽이나 오른쪽으로 이동하면, 아래 또는 같은 방향으로만 계속 가야 한다. (오른쪽으로 갔다가 다시 왼쪽으로 올 수 없다.)</li>
</ul>
<p>먼저 첫번째 줄은 왼쪽에서 오른쪽으로만 갈 수 있기 때문에 왼쪽에서부터 누적한 값이 최댓값이 된다.</p>
<p>두 개의 dp배열을 만들어서 위에서 부터 한 줄씩 계산을 해준다. 하나는 왼쪽에서 오른쪽으로 이동할 때의 최댓값, 다른 하나는 오른쪽에서 왼쪽으로 이동할 때의 최댓값을 저장한다. 예를 들어 왼쪽에서 오른쪽으로 이동할 때의 최댓값은, 왼쪽에서 부터 오른쪽으로 dp배열을 탐색하며 위에서 내려온 경우와 왼쪽에서 온 경우를 비교하여 더 큰 값이 된다.</p>
<p>다음 줄로 내려가기 전에 두 개의 dp배열의 값을 비교하여, 둘 중에 더 큰 값으로 똑같이 맞춰주면 된다.</p>
<h3 id="느낀점">느낀점</h3>
<p>문제를 풀지 못했다. bfs만 고려하며 재방문을 결정하는 방법을 떠올리지 못했다. 이러한 문제 같은 경우에는 dfs를 항상 생각해보자. 또한 top-down이 아닌 bottom-up으로 dp배열을 이용해서 최댓값을 저장해주는 방식을 고려해보자. dfs + dp 방식을 고려하자.</p>
<p>또한 dp방식으로도 풀지 못했다. 신기했다. 문제의 제약 조건이 주어진 이유에 대해서 생각해보고 그것을 이용하자.</p>

                        </div>
                    </article>

                </div>
            </div> 
            <footer class="py-4 text-sm text-gray-700 dark:text-gray-200 text-center">
                © 2023. Taehyeon Kim All rights reserved. 
            </footer>
        </div>
    </body>
</html>
